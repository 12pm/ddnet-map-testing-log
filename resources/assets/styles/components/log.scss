$header-height: 48px;
$msg-margin: $padding;
$mention-background-transparency: 0.9;

.log-header {
    display: flex;
    align-items: center;
    height: $header-height;
    line-height: $header-height;
    width: 100%;
    max-width: 100%;
    font-size: 1.25rem;
    padding: 0 $padding;
    position: fixed;
    top: 0;
    font-weight: bold;
    background-color: $background-color;
    box-shadow:
        0 1px 0 transparentize(black, 0.8),
        0 2px 0 transparentize(black, 0.94);

    .channel-name {
        color: getStrongTextColor($text-color);
    }
}

.channel-name {
    line-height: $header-height / 2;
    color: $text-color;
}

.channel-marker {
    color: getSubtleTextColor($text-color);
    margin-right: 0.2em;
}

.channel-topic {
    font-weight: normal;
    line-height: $header-height / 2;
    border-left: 1px solid transparentize($grey, 0.85);
    margin-left: 1em;
    padding-left: 1em;
    font-size: $font-size - 2px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.log {
    margin-top: $header-height;
    padding: $padding;

    pre {
        background: getAsideBackgroundColor($background-color);
        color: $grey;
        padding: $padding;
        margin-top: $msg-margin;
        border-radius: $radius;
        border: 2px solid getBorderColor($background-color);
        max-width: 90%;
    }

    span.pre {
        background: getAsideBackgroundColor($background-color);
        font-family: $font-family-monospace;
        padding: 0.25em 0.5em;
        white-space: pre-wrap;
        font-size: $font-size - 2px;
    }

    // hack to replicate theoretical :first-of-class pseudo-class
    > .msg {
        // style applied to first sibling
        border-top: none;
        padding-top: 0;

        & ~ .msg {
            // style applied to other sibligns
            border-top: 1px solid transparentize(white, 0.96);
            padding: $padding 0;
        }
    }
}

.msg {
    display: flex;
    border-top: 1px solid transparentize(white, 0.96);
    padding: $padding 0;
}

.msg-left {
    margin-right: $padding * 1.5;
}

.msg-avatar {
    border-radius: 50%;
    height: 40px;
    width: 40px;
}

.msg-date, .msg-edited {
    color: getSubtleTextColor($text-color);
    font-size: 0.9em;
    margin-left: 0.2em;
}

.msg-content {
    padding-top: 0.2em;
}

.msg-attachment {
    display: flex;
    align-items: center;
    max-width: 520px;
    width: 100%;
    margin-bottom: $padding / 2;
    margin-top: $padding / 2;
    padding: $padding;
    $background-color: getAsideBackgroundColor($background-color, 0.5);
    background-color: $background-color;
    border-radius: 3px;
    border-color: getBorderColor($background-color);
}

img.msg-attachment {
    max-height: 300px;
    max-width: 50%;
    padding: 0;
    width: auto;
}

.msg-attachment-inner {
    margin-left: 1em;
    flex: 1;
}

.msg-attachment-filesize {
    color: getSubtleTextColor($text-color);
}

.download-button {
    margin-left: 1em;
    color: getSubtleTextColor($text-color);
}

@each $user-name, $user-color in $user-colors {
    .mention-#{$user-name} {
        color: $user-color;
        background-color: transparentize(
            $user-color,
            $mention-background-transparency
        );
    }
}

@each $user-name, $user-color in $user-colors {
    .msg-user-#{$user-name} {
        color: $user-color;
    }
}
